{% extends 'base.html.twig' %}

{% block title %}Catégories
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<h2 class="mb-4 text-primary">Catégories</h2>


		{# Bouton retour #}
		<a href="{{ path('app_admin_dashboard') }}" class="btn btn-secondary mb-4">
			← Retour au Dashboard
		</a>

		<div class="row g-4">
			{% for category in categories %}
				<div class="col-md-3">
					<div class="card shadow-sm h-100">
						<div class="card-body d-flex flex-column justify-content-between">
							<h5 class="card-title">{{ category.name }}</h5>

							{% if is_granted('ROLE_SUPER_ADMIN') %}
								<div class="mt-3">
									<a href="{{ path('category_edit', {'id': category.id}) }}" class="btn btn-sm btn-warning w-100 mb-1">Modifier</a>
									<form method="post" action="{{ path('app_admin_category_delete', {'id': category.id}) }}" onsubmit="return confirm('Supprimer cette catégorie ?');">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ category.id) }}">
										<button class="btn btn-sm btn-danger w-100">Supprimer</button>
									</form>
								</div>
							{% endif %}
						</div>
					</div>
				</div>
			{% else %}
				<p>Aucune catégorie trouvée.</p>
			{% endfor %}
		</div>

		{% if is_granted('ROLE_SUPER_ADMIN') %}
			<a href="{{ path('app_admin_category_new') }}" class="btn btn-primary mt-4">Créer une nouvelle catégorie</a>
		{% endif %}
	</div>
{% endblock %}

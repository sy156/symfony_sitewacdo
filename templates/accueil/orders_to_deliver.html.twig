{# templates/accueil/orders_to_deliver.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<h1 class="mb-4">{{ title }}</h1>

		{# Bouton retour au dashboard #}
		<div class="mb-3">
			<a href="{{ path('accueil_dashboard') }}" class="btn btn-secondary">
				<i class="bi bi-arrow-left-circle"></i>
				Retour au tableau de bord
			</a>
		</div>

		{# Messages flash #}
		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}
		{% endfor %}

		{# Tableau des commandes à remettre #}
		<div class="card shadow-sm">
			<div class="card-body">
				<table class="table table-striped table-hover mb-0">
					<thead class="table-dark">
						<tr>
							<th>ID</th>
							<th>Utilisateur</th>
							<th>Total</th>
							<th>Statut</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for order in orders %}
							<tr>
								<td>{{ order.id }}</td>
								<td>{{ order.user ? order.user.email : 'client 2' }}</td>
								<td>{{ order.total|number_format(2, ',', ' ') }}
									€</td>
								<td>
									<span class="badge bg-warning text-dark">{{ order.getStatusLabel() }}</span>
								</td>
								<td>
									<a href="{{ path('accueil_order_deliver', {id: order.id}) }}" class="btn btn-success btn-sm" onclick="return confirm(' Remmettre cette commande au client ?');">
										Remise
									</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="5" class="text-center">Aucune commande à remettre</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
